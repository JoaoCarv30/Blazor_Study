@page "/"
@using Blazorwind.Models
@layout Blazorwind.Layout.NavLayout

<PageTitle>Home</PageTitle>

<div class="w-screen flex items-center justify-center flex-col m-4">
    <h1 class="font-extrabold text-4xl text-blue-950">
        Welcome to Ego Store!
    </h1>
    <h3 class="text-gray-500">
        Here do you find the best products for you!
    </h3>
</div>

<section class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-6 overflow-hidden">

    @if (products.Count > 0)
    {
        @foreach (var product in products)
        {
            <div class="bg-white shadow-md rounded-md p-4 flex flex-col h-full hover:scale-y-125">
                <img src="@product.Image" alt="@product.Title" class="w-full h-40  object-center rounded-t-md">
                <div class="flex flex-col flex-grow p-4">
                    <h2 class="text-lg font-bold text-blue-950 line-clamp-2">@product.Title</h2>
                    <p class="text-gray-500 line-clamp-3">@product.Description</p>
                    <p class="text-blue-950 font-bold mt-auto">R$ @product.Price</p>
                </div>
            </div>


        }
    }
    else
    {
        <div class="w-screen h-screen flex items-center justify-center">
            <div class="loader">
                <div class="loader__bar"></div>
                <div class="loader__bar"></div>
                <div class="loader__bar"></div>
                <div class="loader__bar"></div>
                <div class="loader__bar"></div>
                <div class="loader__ball"></div>
            </div>
        </div>
    }

</section>

@code {
    private List<ProductModel> products = new List<ProductModel>();

    [Inject]
    private HttpClient Http { get; set; }

    protected override async Task OnInitializedAsync()
    {
        products = await Http.GetFromJsonAsync<List<ProductModel>>("https://fakestoreapi.com/products");
    }
}
